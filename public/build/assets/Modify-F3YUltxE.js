import{_ as P}from"./TreeCategory-yz3vIs9N.js";import{_ as T,bK as U,aV as I,c as d,a as t,G as L,av as C,b as p,v as h,P as x,H as _,F as v,aT as g,w as N,o as r,br as D,b7 as S,p as M,d as R}from"./app-cpAAYSkm.js";import{S as A}from"./SummernoteEditor-YXY0HYsX.js";import{C as B}from"./ComponentLoader-p7uzdx_k.js";const F={name:"Index",components:{ComponentLoader:B,TreeCategory:P,SummernoteEditor:A,Uploader:U},data(){return{varientName:null,currentTab:"details",variationDivider:"/",varientSkuPrefix:"Ver-",defaultQty:13,productName:null,defaultPrice:null,defaultStoke:null,description:null,details:null,categoryId:1,brandId:null,images:[],variants:[],product_variant:[{option:1,tags:[]}],product_variant_prices:[],variationValues:[],content:null,editorOption:{},brands:[],productImages:[],loading:!1}},methods:{initImages(s){console.log(s)},changeMedia(s){this.images=s},setActiveTab(s){this.currentTab=s},changeVariation(s){var e;this.variationValues[s]=(e=this.variants.find(n=>n.id===parseInt(event.target.value)))==null?void 0:e.variation_options},removeItem(s){var e;(e=this.product_variant)==null||e.splice(s,1),this.checkVariant()},newVariant(){let s=this.variants.map(u=>u.id),e=this.product_variant.map(u=>u.option),n=s.filter(u=>!e.some(a=>u==a));this.product_variant.push({option:n[0],tags:[]})},checkVariant(){let s=[];this.product_variant_prices=[],this.product_variant.filter(e=>{s.push(e.tags),console.log(e)}),this.getCombn(s).forEach(e=>{this.product_variant_prices.push({title:e,price:0,stock:0})})},getCombn(s,e){if(e=e||"",!s.length)return e;let n=this;return s[0].reduce(function(a,l){return a.concat(n.getCombn(s.slice(1),e+l+"/"))},[])},saveNewVarient(){this.loading=!0,this.$axios.post("/api/create-varient",{name:this.varientName}).then(s=>{this.varientName=null,Toast.fire({icon:"success",title:"variation Created Success..."}),$("#addVariaion").modal("hide"),this.allVerients()}).catch(s=>{this.errors=s.response.data.errors,Toast.fire({icon:"warning",title:s.response.data.message})}).finally(()=>this.loading=!1)},allVerients(){this.loading=!0,this.$axios.get("/api/varients",this.from).then(s=>{this.variants=s.data,Toast.fire({icon:"success",title:"Ready For Product Create..."})}).catch(s=>{this.errors=s.response.data.errors,Toast.fire({icon:"warning",title:s.response.data.message})}).finally(()=>this.loading=!1)},allBrands(){this.loading=!0,this.$axios.get("/api/brand",this.from).then(s=>{this.brands=s.data}).catch(s=>{this.errors=s.response.data.errors,Toast.fire({icon:"warning",title:s.response.data.message})}).finally(()=>this.loading=!1)},updateProductDetails(){const s=new FormData;s.append("name",this.productName),s.append("defaultPrice",this.defaultPrice),s.append("defaultQty",this.defaultStoke),s.append("categoryId",this.categoryId),s.append("brandId",this.brandId),s.append("description",this.description),s.append("details",this.details),s.append("stock",this.defaultStoke);const e={name:this.productName,defaultPrice:this.defaultPrice,defaultQty:this.defaultStoke,categoryId:this.categoryId,brandId:this.brandId,description:this.description,details:this.details,stock:this.defaultStoke};this.$axios.put(`/api/product/${this.$route.params.id}`,e).then(n=>{Toast.fire({icon:"success",title:n.data.message}),this.$refs.Close.click(),this.allProducts()}).catch(n=>{console.log(n)})},saveVariation(){this.$axios.post("/api/save-product-variations",{variations:this.product_variant_prices,varArray:this.product_variant,productId:this.$route.params.id}).then(s=>{Toast.fire({icon:"success",title:"variation Update Success..."})}).catch(s=>{Toast.fire({icon:"error",title:s.response.data.message})})},saveImages(){const s=new FormData;for(let e=0;e<this.images.length;e++)s.append(`files[${e}]`,this.images[e].file);s.append("productId",this.$route.params.id),this.$axios.post("/api/save-product-images",s).then(e=>{Toast.fire({icon:"success",title:"Image Update Success..."})}).catch(e=>{Toast.fire({icon:"error",title:e.response.data.message})})},handleFileChange(s){for(let e=0;e<s.target.files.length;e++)this.images.push({url:URL.createObjectURL(s.target.files[e]),file:s.target.files[e]});console.log(this.images)},async fileChange(s){this.isLoading=!0;let e=s.target.files;for(var n=0;n<e.length;n++){let u=URL.createObjectURL(e[n]);e[n].name,e[n].size,e[n].type}},removeMedia(s){let e=this.images[s];e.url.startsWith("blob:")&&URL.revokeObjectURL(e.url),this.images.splice(s,1)},getProduct(){this.loading=!0,this.$axios.get(`/api/product/${this.$route.params.id}`).then(s=>{var e,n,u,a,l,y,V,f,k,b;console.log(s.data),this.productName=(e=s.data)==null?void 0:e.title,this.defaultPrice=(n=s.data)==null?void 0:n.selling_price,this.defaultStoke=(u=s.data)==null?void 0:u.stok,this.description=(a=s.data)==null?void 0:a.description,this.details=(l=s.data)==null?void 0:l.details,this.categoryId=(V=(y=s.data)==null?void 0:y.category)==null?void 0:V.id,this.brandId=(k=(f=s.data)==null?void 0:f.brand)==null?void 0:k.id,this.productImages=(b=s.data)==null?void 0:b.images}).catch(s=>{console.log(s)}).finally(()=>this.loading=!1)},deleteImage(s,e){confirm("Are you sure? Want To Remove This Image...")&&this.$axios.delete("/api/delete-product-image/"+s).then(n=>{Toast.fire({icon:"success",title:"Image Delete Success..."}),this.productImages.splice(e,1)}).catch(n=>{Toast.fire({icon:"error",title:n.response.data.message})})}},created(){this.allVerients(),this.allBrands(),this.getProduct()}},i=s=>(M("data-v-1a2eecda"),s=s(),R(),s),z={key:1,class:"row"},j={class:"col-md-3 d-flex flex-column gap-2"},O=i(()=>t("div",{class:"card-body p-4"}," Product Details ",-1)),E=[O],Q=i(()=>t("div",{class:"card-body p-4"}," Product Variants ",-1)),Y=[Q],H=i(()=>t("div",{class:"card-body p-4"}," Product Images ",-1)),W=[H],G={class:"col-md-9"},K={key:0,class:"card"},q={class:"card-header py-3 d-flex flex-row align-items-center justify-content-between"},J=i(()=>t("h3",{class:"card-title m-0"},"Product Details",-1)),X={class:"card-body"},Z={class:"form-row"},tt={class:"col-md-4 form-group"},et=i(()=>t("label",{for:"productname"},"Product Name",-1)),st={class:"col-md-4 form-group"},ot=i(()=>t("label",{for:"dPrice"},"Default Price",-1)),at={class:"col-md-4 form-group"},it=i(()=>t("label",{for:"defaultStoke"},"Default Quantity",-1)),lt={class:"form-row"},nt={class:"col-md-6 form-group"},rt=i(()=>t("label",null,"Category",-1)),dt={class:"col-md-6 form-group"},ct=i(()=>t("label",null,"Brand",-1)),ut={class:"form-group"},mt=i(()=>t("label",{for:"description"},"Description",-1)),pt={class:"form-group"},ht=i(()=>t("label",null,"Full Details",-1)),_t={key:1,class:"card"},vt={class:"card-header py-3 d-flex flex-row align-items-center justify-content-between"},gt=i(()=>t("h3",{class:"m-0 font-weight-bold text-primary"},"Variants",-1)),ft={class:"d-flex gap-3"},bt=i(()=>t("button",{class:"btn btn-info btn-sm","data-toggle":"modal","data-target":"#addVariaion"},[t("i",{class:"bi bi-plus"}),t("span",null,"Add New Variation")],-1)),yt={key:0,class:"card-body"},Vt={class:"row"},kt={class:"col-md-4"},wt={class:"form-group"},It=i(()=>t("label",{for:"variation"},[t("span",null,"Variation")],-1)),Ct=["onUpdate:modelValue","onChange"],xt=["value"],St={class:"col-md-8"},Pt={class:"form-group"},Tt=["onClick"],Ut=i(()=>t("label",null,"Variation Options",-1)),Lt={class:"container"},Nt={class:"selectpicker",multiple:"","aria-label":"Default select example","data-live-search":"true"},Dt=["value"],Mt={key:1,class:"card-footer"},Rt=i(()=>t("div",{class:"card-header text-uppercase"},"Preview",-1)),At={class:"card-body"},Bt={class:"table-responsive"},Ft={class:"table"},zt=i(()=>t("thead",null,[t("tr",null,[t("td",null,"Variant"),t("td",null,"Price"),t("td",null,"Stock"),t("td",null,"Sku Id")])],-1)),jt={key:0},Ot=["onUpdate:modelValue"],Et=["onUpdate:modelValue"],Qt=["onUpdate:modelValue"],Yt={key:2,class:"card"},Ht={class:"card-body"},Wt={class:"card-header py-3 d-flex flex-row align-items-center justify-content-between"},Gt=i(()=>t("h2",{class:"card-title m-0"},"Product Images",-1)),Kt={class:"mu-elements-wraper"},qt=["src"],Jt=["onClick"],Xt=i(()=>t("svg",{class:"mu-times-icon",xmlns:"http://www.w3.org/2000/svg",width:"0.65em",height:"0.65em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 352 512"},[t("path",{d:"m242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28L75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256L9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z",fill:"currentColor"})],-1)),Zt=[Xt],$t=["src"],te=["onClick"],ee=i(()=>t("svg",{class:"mu-times-icon",xmlns:"http://www.w3.org/2000/svg",width:"0.65em",height:"0.65em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 352 512"},[t("path",{d:"m242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28L75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256L9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z",fill:"currentColor"})],-1)),se=[ee],oe={class:"mu-plusbox-container"},ae=i(()=>t("label",{for:"mu-file-input",class:"mu-plusbox"},[t("svg",{class:"mu-plus-icon",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},[t("g",{fill:"none"},[t("path",{d:"M12 1C5.925 1 1 5.925 1 12s4.925 11 11 11s11-4.925 11-11S18.075 1 12 1zm1 15a1 1 0 1 1-2 0v-3H8a1 1 0 1 1 0-2h3V8a1 1 0 1 1 2 0v3h3a1 1 0 1 1 0 2h-3v3z",fill:"currentColor"})])])],-1)),ie={key:3,class:"card"},le={class:"card-body d-flex gap-2"},ne=i(()=>t("button",{class:"btn btn-lg btn-danger"},"Reset Form",-1)),re={class:"modal fade",id:"addVariaion",tabindex:"-1",role:"dialog","aria-hidden":"false"},de={class:"modal-dialog modal-md",role:"document"},ce={class:"modal-content"},ue={class:"modal-header"},me=i(()=>t("div",{class:"d-flex gap-3"},[t("h5",{class:"modal-title",id:"exampleModalLabel"},"Add Variation")],-1)),pe={type:"button",class:"close",ref:"Close","data-dismiss":"modal","aria-label":"Close"},he=i(()=>t("i",{"aria-hidden":"true",class:"ki ki-close"},null,-1)),_e=[he],ve={class:"modal-body"},ge={class:"form-row"},fe=i(()=>t("label",{for:"var_name"},"Variation Name",-1)),be=i(()=>t("button",{class:"btn btn-sm btn-primary mt-4",type:"submit"},"Save",-1));function ye(s,e,n,u,a,l){var b;const y=I("ComponentLoader"),V=I("TreeCategory"),f=I("v-select"),k=I("SummernoteEditor");return r(),d(v,null,[t("section",null,[a.loading?(r(),L(y,{key:0})):(r(),d("div",z,[t("div",j,[t("div",{class:C(["card cursor-pointer",{"bg-primary text-white fw-bolder":a.currentTab==="details"}]),onClick:e[0]||(e[0]=o=>l.setActiveTab("details"))},E,2),t("div",{class:C(["card cursor-pointer",{"bg-primary text-white fw-bolder":a.currentTab==="variants"}]),onClick:e[1]||(e[1]=o=>l.setActiveTab("variants"))},Y,2),t("div",{class:C(["card cursor-pointer",{"bg-primary text-white fw-bolder":a.currentTab==="images"}]),onClick:e[2]||(e[2]=o=>l.setActiveTab("images"))},W,2)]),t("div",G,[a.currentTab==="details"?(r(),d("div",K,[t("div",q,[J,t("button",{class:"btn btn-primary btn-sm",onClick:e[3]||(e[3]=(...o)=>l.updateProductDetails&&l.updateProductDetails(...o))},"Update Info")]),t("div",X,[t("div",null,[t("div",Z,[t("div",tt,[et,p(t("input",{type:"text",id:"productname","onUpdate:modelValue":e[4]||(e[4]=o=>a.productName=o),placeholder:"Product Name",class:"form-control"},null,512),[[h,a.productName]])]),t("div",st,[ot,p(t("input",{type:"text",id:"dPrice","onUpdate:modelValue":e[5]||(e[5]=o=>a.defaultPrice=o),placeholder:"Default Price.",class:"form-control"},null,512),[[h,a.defaultPrice]])]),t("div",at,[it,p(t("input",{type:"text",id:"defaultStoke","onUpdate:modelValue":e[6]||(e[6]=o=>a.defaultStoke=o),placeholder:"Default Quantity...",class:"form-control"},null,512),[[h,a.defaultStoke]])])]),t("div",lt,[t("div",nt,[rt,x(V,{modelValue:a.categoryId,"onUpdate:modelValue":e[7]||(e[7]=o=>a.categoryId=o)},null,8,["modelValue"])]),t("div",dt,[ct,x(f,{modelValue:a.brandId,"onUpdate:modelValue":e[8]||(e[8]=o=>a.brandId=o),class:"form-control",reduce:o=>o.id,options:a.brands,label:"title",placeholder:"Select Brand..."},null,8,["modelValue","reduce","options"])])]),t("div",ut,[mt,p(t("textarea",{"onUpdate:modelValue":e[9]||(e[9]=o=>a.description=o),id:"description",cols:"30",rows:"4",class:"form-control"},null,512),[[h,a.description]])]),t("div",pt,[ht,x(k,{modelValue:a.details,"onUpdate:modelValue":e[10]||(e[10]=o=>a.details=o)},null,8,["modelValue"])])])])])):_("",!0),a.currentTab==="variants"?(r(),d("div",_t,[t("div",vt,[gt,t("div",ft,[bt,t("button",{class:"btn btn-primary btn-sm",onClick:e[11]||(e[11]=(...o)=>l.saveVariation&&l.saveVariation(...o))},"Save Variations")])]),a.product_variant.length>0?(r(),d("div",yt,[(r(!0),d(v,null,g(a.product_variant,(o,c)=>{var w;return r(),d("div",Vt,[t("div",kt,[t("div",wt,[It,p(t("select",{id:"variation","onUpdate:modelValue":m=>o.option=m,onChange:m=>l.changeVariation(c),class:"form-control"},[(r(!0),d(v,null,g(a.variants,m=>(r(),d("option",{value:m.id},S(m.name),9,xt))),256))],40,Ct),[[D,o.option]])])]),t("div",St,[t("div",Pt,[((w=a.product_variant)==null?void 0:w.length)!==1?(r(),d("label",{key:0,onClick:m=>l.removeItem(c),class:"float-right text-primary",style:{cursor:"pointer"}},"Remove",8,Tt)):_("",!0),Ut,t("div",Lt,[t("select",Nt,[(r(!0),d(v,null,g(a.variationValues[c],m=>(r(),d("option",{value:m},S(m.name),9,Dt))),256))])]),x(f,{modelValue:o.tags,"onUpdate:modelValue":[m=>o.tags=m,l.checkVariant],label:"name",class:"form-control",multiple:"",taggable:"",placeholder:"Select Variation Options..."},null,8,["modelValue","onUpdate:modelValue"])])])])}),256))])):_("",!0),((b=a.product_variant)==null?void 0:b.length)<a.variants.length?(r(),d("div",Mt,[t("button",{onClick:e[12]||(e[12]=o=>l.newVariant()),class:"btn btn-primary"},"Add another option")])):_("",!0),Rt,t("div",At,[t("div",Bt,[t("table",Ft,[zt,a.product_variant_prices.length>0?(r(),d("tbody",jt,[(r(!0),d(v,null,g(a.product_variant_prices,o=>(r(),d("tr",null,[t("td",null,S(o.title),1),t("td",null,[p(t("input",{type:"number",class:"form-control","onUpdate:modelValue":c=>o.price=c},null,8,Ot),[[h,o.price]])]),t("td",null,[p(t("input",{type:"number",class:"form-control","onUpdate:modelValue":c=>o.stock=c},null,8,Et),[[h,o.stock]])]),t("td",null,[p(t("input",{type:"text",class:"form-control","onUpdate:modelValue":c=>o.sku=c},null,8,Qt),[[h,o.sku]])])]))),256))])):_("",!0)])])])])):_("",!0),a.currentTab==="images"?(r(),d("div",Yt,[t("div",Ht,[t("div",Wt,[Gt,t("button",{class:"btn btn-primary btn-sm",onClick:e[13]||(e[13]=(...o)=>l.saveImages&&l.saveImages(...o))},"Save Images")]),t("div",{class:C(["mu-container",s.isInvalid?"mu-red-border":""])},[t("div",Kt,[(r(!0),d(v,null,g(a.productImages,(o,c)=>(r(),d("div",{key:c,class:"mu-image-container"},[t("img",{src:`/storage/uploads/${o.image}`,alt:"",class:"mu-images-preview"},null,8,qt),t("button",{onClick:w=>l.deleteImage(o==null?void 0:o.id,c),class:"mu-close-btn",type:"button"},Zt,8,Jt)]))),128)),(r(!0),d(v,null,g(a.images,(o,c)=>(r(),d("div",{key:c,class:"mu-image-container"},[t("img",{src:o.url,alt:"",class:"mu-images-preview"},null,8,$t),t("button",{onClick:w=>l.removeMedia(c),class:"mu-close-btn",type:"button"},se,8,te)]))),128)),t("div",oe,[ae,t("input",{onChange:e[14]||(e[14]=(...o)=>l.handleFileChange&&l.handleFileChange(...o)),id:"mu-file-input",type:"file",accept:"image/*",multiple:"",hidden:""},null,32)])])],2)])])):_("",!0),a.currentTab==="seo"?(r(),d("div",ie,[t("div",le,[t("button",{class:"btn btn-lg btn-primary",onClick:e[15]||(e[15]=(...o)=>s.saveProduct&&s.saveProduct(...o))},"Save Product"),ne])])):_("",!0)])]))]),t("div",re,[t("div",de,[t("div",ce,[t("div",ue,[me,t("button",pe,_e,512)]),t("div",ve,[t("form",{onSubmit:e[17]||(e[17]=N((...o)=>l.saveNewVarient&&l.saveNewVarient(...o),["prevent"]))},[t("div",ge,[fe,p(t("input",{type:"text",id:"var_name","onUpdate:modelValue":e[16]||(e[16]=o=>a.varientName=o),placeholder:"Variation Name",class:"form-control"},null,512),[[h,a.varientName]])]),be],32)])])])])],64)}const Ce=T(F,[["render",ye],["__scopeId","data-v-1a2eecda"]]);export{Ce as default};
