import{bH as f,aQ as y,aE as w,aV as v,c as l,a as e,P as x,bA as C,F as k,aT as A,o as a,e as _,b7 as t,bg as p,bM as u,ax as j}from"./app-cpAAYSkm.js";const J={class:"card card-custom"},h={class:"card-header d-flex align-items-center justify-content-between"},B=e("div",{class:"card-title d-flex gap-5"},[e("h3",null,"Manage Campaign")],-1),D={class:"mt-5"},E={class:"card my-2 w-100 overflow-hidden"},S={class:"card-body"},T={class:"d-flex align-items-start justify-content-between"},N={class:"d-flex flex-column justify-content-between h-100"},L={class:"d-flex flex-column gap-2"},M=e("h2",null,"Job Details",-1),P={class:"d-flex gap-5 w-100 justify-content-between"},V=e("p",{class:"p-0 m-0"},"Total Jobs:",-1),F={class:"badge bg-light-primary text-primary"},R={class:"d-flex gap-5 w-100 justify-content-between"},$=e("p",{class:"p-0 m-0"},"Pending Jobs:",-1),I={class:"badge bg-light-primary text-primary"},q={class:"d-flex gap-5 w-100 justify-content-between"},z=e("p",{class:"p-0 m-0"},"Processed Job:",-1),H={class:"badge bg-light-primary text-primary"},Q={class:"d-flex flex-column gap-2"},Y=e("h2",null,"Start / End",-1),G={class:"d-flex gap-5 w-100 justify-content-between"},K=e("p",{class:"p-0 m-0"},"Created At:",-1),O={class:"badge bg-light-info text-info fw-bold"},U={class:"d-flex gap-5 w-100 justify-content-between"},W=e("p",{class:"p-0 m-0"},"Finished At:",-1),X={class:"badge bg-light-primary text-primary"},Z=["onClick"],b={key:1},le={__name:"ManageCampaign",setup(ee){const{sendRequest:d,error:se,loading:te}=f(),i=y([]),r=async()=>{i.value=await d("api/get-all-campaign")};setInterval(async function(){var n,o;((o=(n=i.value)==null?void 0:n[0])==null?void 0:o.progress)<100&&await r()},3e3),w(async()=>{await r()});const g=n=>{Swal.fire({title:"Are You Sure!",text:"you watnt to delete this?",icon:"warning",confirmButtonColor:"#ddd",cancelButtonColor:"red",confirmButtonText:"Delete",showCancelButton:!0}).then(o=>{o.value&&(d({url:`/api/delete-campaign/${n}`,method:"DELETE"}),Toast.fire({icon:"success",title:"Campaign Delete Successfully Done..."}))}).catch(()=>{Swal.fire({icon:"success",title:"dont worry. your data is safe..."})})};return(n,o)=>{const m=v("RouterLink");return a(),l("div",null,[e("div",J,[e("div",h,[B,x(m,{class:"btn btn-primary",to:"/email-marketing"},{default:C(()=>[_("Add New Campaign")]),_:1})])]),e("div",D,[i.value.length?(a(!0),l(k,{key:0},A(i.value,(s,ne)=>{var c;return a(),l("div",E,[e("div",S,[e("div",T,[e("div",N,[e("div",null,[e("h2",null,t(s==null?void 0:s.name),1),e("p",null,[_("Campaign Id: "),e("strong",null,t(s==null?void 0:s.id),1)])]),e("div",null,[e("h2",null,"Progress: "+t(s==null?void 0:s.progress)+" %",1)])]),e("div",L,[M,e("div",P,[V,e("span",F,t(s==null?void 0:s.totalJobs),1)]),e("div",R,[$,e("span",I,t(s==null?void 0:s.pendingJobs),1)]),e("div",q,[z,e("span",H,t(s==null?void 0:s.processedJobs),1)])]),e("div",Q,[Y,e("div",G,[K,e("span",O,t(p(u)(s==null?void 0:s.createdAt).format("lll")),1)]),e("div",U,[W,e("span",X,t((c=p(u)(s==null?void 0:s.finishedAt))==null?void 0:c.format("lll")),1)])]),e("div",null,[e("button",{class:"btn btn-warning",onClick:oe=>g(s==null?void 0:s.id)},"Delete Job",8,Z)])])]),e("div",{class:"border-5 border-warning border-bottom",style:j(`width:${s==null?void 0:s.progress}%`)},null,4)])}),256)):(a(),l("h1",b,"No Campaign Exist...."))])])}}};export{le as default};
