import{aQ as u,_ as _e,bH as me,z as te,aE as pe,aV as fe,c as v,a as e,F as Q,aT as M,bg as f,e as x,b7 as i,H as ye,w as be,P as se,b as le,br as ge,v as we,G as xe,o as r,p as Ce,d as ke,O as V}from"./app-cpAAYSkm.js";import{_ as Te}from"./TreeCategory-yz3vIs9N.js";import{C as Le}from"./ComponentLoader-p7uzdx_k.js";function Se(){let a=u([]);const b=async s=>{const o=a.value.findIndex(d=>(d==null?void 0:d.id)===(s==null?void 0:s.id));o>-1?a.value[o].buyQty<a.value[o].qty?(a.value[o].buyQty++,Toast.fire({icon:"success",title:"Quantity Updated..."})):Toast.fire({icon:"warning",title:"Max Quantity exist..."}):(a.value.push(s),Toast.fire({icon:"success",title:"Added To Pos..."})),await m()},I=async s=>{const o=a.value.findIndex(d=>(d==null?void 0:d.id)===s);o>-1&&(a.value[o].buyQty<a.value[o].qty?(console.log("buy qty",a.value[o].buyQty),console.log("main qty",a.value[o].qty),a.value[o].buyQty++,Toast.fire({icon:"success",title:"Quantity Updated..."})):Toast.fire({icon:"warning",title:"Max Quantity exist..."})),await m()},P=async s=>{const o=a.value.findIndex(d=>(d==null?void 0:d.id)===s);o>-1&&(a.value[o].buyQty>1?(a.value[o].buyQty--,Toast.fire({icon:"success",title:"Quantity Updated..."})):Toast.fire({icon:"warning",title:"Min Quantity 1 ...."})),await m()},c=async s=>{const o=a.value.indexOf(s);o>-1&&(a.value.splice(o,1),Toast.fire({icon:"success",title:"Remove From Pos..."})),await m()},_=()=>{localStorage.removeItem("pos_cart"),a.value=[]},C=()=>{const s=localStorage.getItem("pos_cart");s&&(a.value=JSON.parse(s))},k=()=>a.value,g=()=>{let s=0;return a.value.map(o=>(s+=o.price*o.buyQty,s)),s},m=async()=>{localStorage.setItem("pos_cart",JSON.stringify(a.value))};return{addToCart:b,initCart:C,incrementQty:I,decrementQty:P,removeFromCart:c,getAllItems:k,getSubTotal:g,clearCart:_,cart:a}}const h=a=>(Ce("data-v-f9e3624e"),a=a(),ke(),a),Qe={class:"row match-height"},Me={class:"col-md-6"},$e={class:"card card-custom"},Ie=h(()=>e("div",{class:"card-header flex-wrap py-5"},[e("div",{class:"card-title"},[e("h3",{class:"card-label"},[x("Product Carts "),e("span",{class:"d-block text-muted pt-2 font-size-sm"},"all employees details is here")])])],-1)),Pe={class:"card-body pos-card-body"},Ve={class:"table table-separate table-head-custom table-checkable",id:""},De=h(()=>e("thead",{class:"pos-t-head"},[e("tr",null,[e("th",{style:{width:"30%"}},"Title"),e("th",null,"Qty"),e("th",null,"Unit"),e("th",null,"Total"),e("th",null,"Action")])],-1)),Ae=["onClick"],Be=["onClick"],Ue=V('<span class="svg-icon svg-icon-md" data-v-f9e3624e><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" data-v-f9e3624e><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" data-v-f9e3624e><rect x="0" y="0" width="24" height="24" data-v-f9e3624e></rect><circle fill="#000000" opacity="0.3" cx="12" cy="12" r="10" data-v-f9e3624e></circle><path d="M11,11 L11,7 C11,6.44771525 11.4477153,6 12,6 C12.5522847,6 13,6.44771525 13,7 L13,11 L17,11 C17.5522847,11 18,11.4477153 18,12 C18,12.5522847 17.5522847,13 17,13 L13,13 L13,17 C13,17.5522847 12.5522847,18 12,18 C11.4477153,18 11,17.5522847 11,17 L11,13 L7,13 C6.44771525,13 6,12.5522847 6,12 C6,11.4477153 6.44771525,11 7,11 L11,11 Z" fill="#000000" data-v-f9e3624e></path></g></svg></span>',1),Ne=[Ue],qe=["onClick"],ze=V('<span class="svg-icon svg-icon-md" data-v-f9e3624e><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" data-v-f9e3624e><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" data-v-f9e3624e><rect x="0" y="0" width="24" height="24" data-v-f9e3624e></rect><circle fill="#000000" opacity="0.3" cx="12" cy="12" r="10" data-v-f9e3624e></circle><rect fill="#000000" x="6" y="11" width="12" height="2" rx="1" data-v-f9e3624e></rect></g></svg></span>',1),Oe=[ze],je=["onClick"],Fe=V('<span class="svg-icon svg-icon-md" data-v-f9e3624e><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" data-v-f9e3624e><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" data-v-f9e3624e><rect x="0" y="0" width="24" height="24" data-v-f9e3624e></rect><path d="M6,8 L6,20.5 C6,21.3284271 6.67157288,22 7.5,22 L16.5,22 C17.3284271,22 18,21.3284271 18,20.5 L18,8 L6,8 Z" fill="#000000" fill-rule="nonzero" data-v-f9e3624e></path><path d="M14,4.5 L14,4 C14,3.44771525 13.5522847,3 13,3 L11,3 C10.4477153,3 10,3.44771525 10,4 L10,4.5 L5.5,4.5 C5.22385763,4.5 5,4.72385763 5,5 L5,5.5 C5,5.77614237 5.22385763,6 5.5,6 L18.5,6 C18.7761424,6 19,5.77614237 19,5.5 L19,5 C19,4.72385763 18.7761424,4.5 18.5,4.5 L14,4.5 Z" fill="#000000" opacity="0.3" data-v-f9e3624e></path></g></svg></span>',1),He=[Fe],Ze={key:0,class:"pos-account"},Ee={class:"fw-bolder"},Je={class:"card card-custom mt-5"},Re={class:"card-body"},Ge={class:"form-group"},Ke=h(()=>e("label",null,"Select Customer",-1)),We={class:"form-group"},Xe=h(()=>e("label",null,"Payment Method",-1)),Ye=h(()=>e("option",{disabled:"",selected:"",value:""},"~~ Select Payment Method~~",-1)),et=["value","textContent"],tt=h(()=>e("div",{class:"card-footer"},[e("button",{type:"submit",class:"btn btn-primary mr-2"},"Submit"),e("button",{type:"reset",class:"btn btn-secondary"},"Cancel")],-1)),st={class:"col-md-6"},lt={class:"card card-custom"},at=h(()=>e("div",{class:"card-header flex-wrap py-5"},[e("div",{class:"card-title"},[e("h3",{class:"card-label"},[x("All Products "),e("span",{class:"d-block text-muted pt-2 font-size-sm"},"all products with product details")])])],-1)),ot={class:"card-body"},nt={class:"example-preview"},it={key:1,class:"tab-content mt-5 show-product-overflow",id:"myTabContent1"},ct={class:"tab-pane fade show active",id:"home-1",role:"tabpanel","aria-labelledby":"home-tab-1"},dt={class:"row match-height px-1"},rt=["onDblclick"],ut={class:"card cursor-pointer"},vt={class:"card-body p-0 d-flex flex-column justify-content-between"},ht={class:"card-image"},_t=["src"],mt={class:"card-heading fw-bold"},pt={class:"card-text"},ft=["onClick"],yt={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},bt={class:"modal-dialog modal-lg"},gt={class:"modal-content"},wt={class:"modal-body"},xt={class:"row"},Ct={class:"col-md-6"},kt={class:"row"},Tt={class:"col-md-4"},Lt={class:"img-preview-scroll"},St=["src"],Qt={class:"col-md-8"},Mt=["src"],$t={class:"col-md-6"},It={class:"text-capitalize fw-bold"},Pt={class:"text-capitalize"},Vt={class:"fw-bolder fs-2"},Dt={class:"row border-top mt-3"},At={class:"col-md-12"},Bt=h(()=>e("hr",null,null,-1)),Ut=h(()=>e("h3",null,"Desscription",-1)),Nt=h(()=>e("hr",null,null,-1)),qt=h(()=>e("h3",null,"Desscription",-1)),zt=["innerHTML"],Ot={__name:"Index",setup(a){const{sendRequest:b,loading:I,error:P}=me(),c=Se(),_=u({customer:"",payby:""}),C=u([]),k=u([]),g=u(null),m=u(null),s=u([]),o=u(null);u([]),u([]),u(null),u([]);const d=async()=>{const l=await b("api/admin/pos-products");k&&(k.value=l)},ae=async()=>{const l=await b("api/customer?onlyData");l&&(C.value=l)},oe=async()=>{const l=await b("/api/admin/get-setting?settings=posPaymentMethods");l&&(o.value=l)},ne=te(()=>{let l=k.value;return g.value&&(l=l.filter(n=>{var y,p;return(p=(y=n==null?void 0:n.product)==null?void 0:y.title)==null?void 0:p.toLowerCase().includes(g.value)})),m.value&&(l=l.filter(n=>{var y,p;return((p=(y=n==null?void 0:n.product)==null?void 0:y.category)==null?void 0:p.id)===m.value})),l}),ie=l=>{c.addToCart({...l,buyQty:1})},ce=()=>{c.addToCart({...s.value,buyQty:1}),$("#exampleModal").modal("hide")},de=l=>{$("#exampleModal").modal("show"),s.value=l},re=async()=>{const l=await b({url:"api/pos",method:"POST",data:{..._.value,subTotal:c.getSubTotal(),products:c.getAllItems()}});l.message&&(c.clearCart(),_.value.customer="",_.value.payby="",Toast.fire({icon:"success",title:l.message}))},ue=l=>{console.log(l)};te(()=>{let l=0;return c.getAllItems().map(n=>(l+=n.price*n.buyQty,l)),l});const ve=l=>{C.value.filter(n=>n.id===l)[0]};return pe(()=>{d(),ae(),c.initCart(),oe()}),(l,n)=>{var p,D,A,B,U,N,q,z,O,j,F,H,Z,E,J,R,G,K,W,X,Y,ee;const y=fe("v-select");return r(),v(Q,null,[e("div",null,[e("div",Qe,[e("div",Me,[e("div",$e,[Ie,e("div",Pe,[e("table",Ve,[De,e("tbody",null,[(r(!0),v(Q,null,M(f(c).getAllItems(),(t,T)=>{var L,S;return r(),v("tr",{key:`card-product-${T}`},[e("td",null,[e("a",{href:"#",onClick:w=>l.showSingleProduct(t.id)},i((S=(L=t==null?void 0:t.product)==null?void 0:L.title)==null?void 0:S.slice(0,10))+"...",9,Ae)]),e("td",null,[x(i(t.buyQty)+" ",1),e("a",{href:"javascript:void(0);",onClick:w=>f(c).incrementQty(t.id),class:"btn btn-sm btn-clean btn-icon",title:"Delete"},Ne,8,Be),e("a",{href:"javascript:;",onClick:w=>f(c).decrementQty(t.id),class:"btn btn-sm btn-clean btn-icon",title:"Delete"},Oe,8,qe)]),e("td",null,i(t.price)+" $",1),e("td",null,i(t.price*(t==null?void 0:t.buyQty))+" $",1),e("td",null,[e("a",{href:"javascript:void(0)",onClick:w=>f(c).removeFromCart(t),class:"btn btn-sm btn-clean btn-icon",title:"Delete"},He,8,je)])])}),128))])]),f(c).getSubTotal()>0?(r(),v("div",Ze,[x(" Total Items: "),e("h4",Ee,"Sub Total: "+i(f(c).getSubTotal())+" $",1)])):ye("",!0)])]),e("div",Je,[e("div",Re,[x(i((D=(p=f(P))==null?void 0:p.response)==null?void 0:D.data)+" ",1),e("form",{onSubmit:n[2]||(n[2]=be(t=>re(),["prevent"]))},[e("div",Ge,[Ke,se(y,{options:C.value,class:"form-control form-control-solid",style:{padding:"0.375rem 0.75rem"},modelValue:_.value.customer,"onUpdate:modelValue":[n[0]||(n[0]=t=>_.value.customer=t),ve],reduce:t=>t.id,label:"full_name",placeholder:"Select Customer..."},null,8,["options","modelValue","reduce"])]),e("div",We,[Xe,le(e("select",{class:"form-control form-control-solid","onUpdate:modelValue":n[1]||(n[1]=t=>_.value.payby=t)},[Ye,(r(!0),v(Q,null,M((A=o.value)==null?void 0:A.split("|"),t=>(r(),v("option",{value:t,textContent:i(t)},null,8,et))),256))],512),[[ge,_.value.payby]])]),tt],32)])])]),e("div",st,[e("div",lt,[at,e("div",ot,[le(e("input",{type:"text","onUpdate:modelValue":n[3]||(n[3]=t=>g.value=t),class:"form-control form-control-solid mb-3",placeholder:"Search....."},null,512),[[we,g.value]]),e("div",nt,[se(Te,{class:"form-control form-control-solid",style:{padding:"0.375rem 0.75rem"},modelValue:m.value,"onUpdate:modelValue":[n[4]||(n[4]=t=>m.value=t),ue]},null,8,["modelValue"]),f(I)?(r(),xe(Le,{key:0,style:{"min-height":"40vh"}})):(r(),v("div",it,[e("div",ct,[e("div",dt,[(r(!0),v(Q,null,M(ne.value,(t,T)=>{var L,S,w;return r(),v("div",{class:"col-md-4 mt-2 px-1",onDblclick:he=>ie(t),key:`pos-s-roduct-${T}`},[e("div",ut,[e("div",vt,[e("div",ht,[e("img",{src:`${(S=(L=t==null?void 0:t.product)==null?void 0:L.images[0])==null?void 0:S.url}`},null,8,_t)]),e("div",mt,i((w=t==null?void 0:t.product)==null?void 0:w.title)+"... ",1),e("div",pt,i(t==null?void 0:t.price)+" $ ",1),e("a",{href:"javascript:void(0)",class:"card-button",onClick:he=>de(t)},"Show Details",8,ft)])])],40,rt)}),128))])])]))])])])])])]),e("div",yt,[e("div",bt,[e("div",gt,[e("div",wt,[e("div",xt,[e("div",Ct,[e("div",kt,[e("div",Tt,[e("div",Lt,[(r(!0),v(Q,null,M((U=(B=s.value)==null?void 0:B.product)==null?void 0:U.images,(t,T)=>(r(),v("img",{class:"w-100",src:`${t==null?void 0:t.url}`,key:`single-image-${T}`},null,8,St))),128))])]),e("div",Qt,[e("img",{class:"w-100",src:`${(z=(q=(N=s.value)==null?void 0:N.product)==null?void 0:q.images[0])==null?void 0:z.url}`},null,8,Mt)])])]),e("div",$t,[e("h1",It,i((j=(O=s.value)==null?void 0:O.product)==null?void 0:j.title)+"-"+i((H=(F=s.value.varient)==null?void 0:F.replace(/\//g,"-"))==null?void 0:H.slice(0,-1)),1),e("h4",null,"Product Sku: "+i((Z=s.value)==null?void 0:Z.sku),1),e("p",null,[x("Category: "),e("strong",null,i((R=(J=(E=s.value)==null?void 0:E.product)==null?void 0:J.category)==null?void 0:R.name),1)]),e("p",Pt,"Variation: "+i((K=(G=s.value.varient)==null?void 0:G.replace(/\//g,"-"))==null?void 0:K.slice(0,-1)),1),e("h2",Vt,"Price: "+i(s.value.price)+" $",1),e("div",{class:"border-t w-100"},[e("button",{class:"btn btn-primary w-100 rounded-0 py-5 fs-2 fw-bold",onClick:ce},"Add To Pos")])])]),e("div",Dt,[e("div",At,[Bt,e("div",null,[Ut,e("p",null,i((X=(W=s.value)==null?void 0:W.product)==null?void 0:X.description),1)]),Nt,e("div",null,[qt,e("div",{class:"product-content",innerHTML:(ee=(Y=s.value)==null?void 0:Y.product)==null?void 0:ee.details},null,8,zt)])])])])])])])],64)}}},Zt=_e(Ot,[["__scopeId","data-v-f9e3624e"]]);export{Zt as default};
