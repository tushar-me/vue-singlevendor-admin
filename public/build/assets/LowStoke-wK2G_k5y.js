import{aQ as _,bH as V,aE as D,c as i,a as e,bg as N,G as z,F as S,aT as I,P as U,b7 as l,e as Z,b as O,v as P,o as a,O as B}from"./app-cpAAYSkm.js";import{_ as F}from"./Pagination-eDnx4Gf3.js";import{C as Q}from"./ComponentLoader-p7uzdx_k.js";const R={key:1,class:"card card-custom"},G=e("div",{class:"card-header flex-wrap py-5"},[e("div",{class:"card-title"},[e("h3",{class:"card-label"},"Low Stoke Management ")])],-1),H={class:"card-body"},Y={class:"table table-separate table-head-custom table-checkable",id:""},j=e("thead",null,[e("tr",null,[e("th",null,"Record ID"),e("th",null,"Title"),e("th",null,"Category"),e("th",null,"Stoke Status"),e("th",null,"Unit price"),e("th",null,"Courrent Stoke"),e("th",null,"Actions")])],-1),J={class:"d-flex flex-column"},K={class:"fw-bold"},W={class:"fs-6"},X={key:0,class:"badge badge-success bg-success fw-bold text-white"},ee={key:1,class:"badge badge-warning bg-warning fw-bold text-white"},te={key:2,class:"badge badge-danger bg-danger fw-bold text-white"},se=["onClick"],oe=B('<span class="svg-icon svg-icon-md"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><rect x="0" y="0" width="24" height="24"></rect><path d="M8,17.9148182 L8,5.96685884 C8,5.56391781 8.16211443,5.17792052 8.44982609,4.89581508 L10.965708,2.42895648 C11.5426798,1.86322723 12.4640974,1.85620921 13.0496196,2.41308426 L15.5337377,4.77566479 C15.8314604,5.0588212 16,5.45170806 16,5.86258077 L16,17.9148182 C16,18.7432453 15.3284271,19.4148182 14.5,19.4148182 L9.5,19.4148182 C8.67157288,19.4148182 8,18.7432453 8,17.9148182 Z" fill="#000000" fill-rule="nonzero" transform="translate(12.000000, 10.707409) rotate(-135.000000) translate(-12.000000, -10.707409) "></path><rect fill="#000000" opacity="0.3" x="5" y="20" width="15" height="2" rx="1"></rect></g></svg></span>',1),le=[oe],ae=["onClick"],ne=B('<span class="svg-icon svg-icon-dark-50 svg-icon-2x"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><rect x="0" y="0" width="24" height="24"></rect><path d="M6,8 L18,8 L17.106535,19.6150447 C17.04642,20.3965405 16.3947578,21 15.6109533,21 L8.38904671,21 C7.60524225,21 6.95358004,20.3965405 6.89346498,19.6150447 L6,8 Z M8,10 L8.45438229,14.0894406 L15.5517885,14.0339036 L16,10 L8,10 Z" fill="#000000" fill-rule="nonzero"></path><path d="M14,4.5 L14,3.5 C14,3.22385763 13.7761424,3 13.5,3 L10.5,3 C10.2238576,3 10,3.22385763 10,3.5 L10,4.5 L5.5,4.5 C5.22385763,4.5 5,4.72385763 5,5 L5,5.5 C5,5.77614237 5.22385763,6 5.5,6 L18.5,6 C18.7761424,6 19,5.77614237 19,5.5 L19,5 C19,4.72385763 18.7761424,4.5 18.5,4.5 L14,4.5 Z" fill="#000000" opacity="0.3"></path></g></svg></span>',1),ie=[ne],de=e("tbody",null,null,-1),ce={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},re={class:"modal-dialog"},he={class:"modal-content"},ue={class:"card"},_e={class:"card-body"},me={class:"fw-bold"},ge={class:"fw-bold"},we={class:"fw-bold"},be={class:"fw-bold"},ve={class:"fw-bolder"},fe={class:"badge bg-primary"},ke=e("hr",{class:"border broder-1"},null,-1),ye=e("label",{for:"qty"},"Add Stoke Quantity",-1),Se={__name:"LowStoke",setup(xe){const d=User.userInfo(),c=_([]),{sendRequest:h,loading:M}=V(),n=_({}),u=_(null),A=s=>{$("#exampleModal").modal("show"),n.value=s},q=async()=>{var o;const s=await h({method:"put",data:{qty:u.value},url:`/api/admin/update-stokes/${(o=n.value)==null?void 0:o.id}`,headers:{Authorization:`Bearer ${d==null?void 0:d.token}`}});s!=null&&s.message&&(await r(),$("#exampleModal").modal("hide"),Toast.fire({icon:"success",title:s==null?void 0:s.message})),console.log(s)},r=async s=>{const o=await h({method:"get",url:s??"/api/admin/product-low-stokes",headers:{Authorization:`Bearer ${d==null?void 0:d.token}`}});c.value=o};function E(s){Swal.fire({title:"Are You Sure!",text:"you watnt to delete this?",icon:"warning",confirmButtonColor:"#ddd",cancelButtonColor:"red",confirmButtonText:"Delete",showCancelButton:!0}).then(async o=>{o.value&&(h({url:"/api/delete-product-stoke/"+s,method:"DELETE"}),Toast.fire({icon:"success",title:res.data.message}),await r())}).catch(o=>{console.log(o),Swal.fire({icon:"success",title:"dont worry. your data is safe..."}),this.$router.push({name:"ManageEmployee"})})}return D(async()=>{await r()}),(s,o)=>{var m,g,w,b,v,f,k,y;return a(),i(S,null,[e("div",null,[N(M)?(a(),z(Q,{key:0})):(a(),i("div",R,[G,e("div",H,[e("table",Y,[j,(a(!0),i(S,null,I((m=c.value)==null?void 0:m.data,(t,x)=>{var p,L,C;return a(),i("tr",{key:`stoke-${x}`},[e("td",null,"#_"+l(x+1),1),e("td",null,[e("div",J,[e("h5",K,l((p=t==null?void 0:t.product)==null?void 0:p.title),1),e("small",W,"Sku: "+l(t==null?void 0:t.sku),1)])]),e("td",null,l((C=(L=t==null?void 0:t.product)==null?void 0:L.category)==null?void 0:C.name),1),e("td",null,[t.qty>10?(a(),i("span",X,"Available In Stoke")):t.qty<=10&&t.qty>0?(a(),i("span",ee,"Low Stoke")):(a(),i("span",te,"Out Of Stoke"))]),e("td",null,l(t==null?void 0:t.price)+" $",1),e("td",null,l(t.qty),1),e("td",null,[e("button",{onClick:T=>A(t),class:"btn btn-sm btn-clean btn-icon",title:"Edit details"},le,8,se),e("button",{class:"btn btn-icon ms-2",title:"Edit details",onClick:T=>E(t==null?void 0:t.id)},ie,8,ae)])])}),128)),de]),U(F,{onSomeEvent:r,links:c.value.links,from:c.value.from,to:c.value.to,total:c.value.total,notShowNumber:!1},null,8,["links","from","to","total"])])]))]),e("div",ce,[e("div",re,[e("div",he,[e("div",ue,[e("div",_e,[e("h4",me,"Product: "+l((w=(g=n.value)==null?void 0:g.product)==null?void 0:w.title),1),e("h6",ge,"Varient: "+l((f=(v=(b=n.value)==null?void 0:b.varient)==null?void 0:v.replace(/\//g,"-"))==null?void 0:f.slice(0,-1)),1),e("h6",we,"Sku: "+l((k=n.value)==null?void 0:k.sku),1),e("h6",be,"Unit Price: "+l((y=n.value)==null?void 0:y.price)+" $",1),e("h6",ve,[Z("Current Stoke: "),e("span",fe,l(n.value.qty),1)]),ke,e("div",null,[ye,O(e("input",{"onUpdate:modelValue":o[0]||(o[0]=t=>u.value=t),class:"form-control",placeholder:"e.g Add more 500 pc"},null,512),[[P,u.value]])]),e("button",{class:"btn btn-primary ms-auto mt-3",onClick:q}," Add To Stoke ")])])])])])],64)}}};export{Se as default};
