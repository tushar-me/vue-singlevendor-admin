import{bH as ee,aQ as c,aE as se,z as ae,c as o,a as e,bg as t,H as u,P as G,bJ as K,b7 as f,b as v,v as y,br as le,F as te,aT as oe,o as n,av as ne,e as de,bo as ie}from"./app-cpAAYSkm.js";const re=e("div",{class:"card rounded-md bg-primary mb-3"},[e("div",{class:"card-body py-4 rounded-lg"},[e("p",{class:"p-0 m-0 text-white"},' "Begin by specifying the campaign name, subject, and body. Then, select the desired number of emails to send in each batch for optimal distribution." ')])],-1),ce={class:"card card-custom"},ue={class:"card-header"},me={class:"card-title d-flex gap-5"},pe={key:0},ve={class:"card-body"},_e={class:"mt-3"},he={class:"d-flex align-items-center gap-2"},ge=e("h2",null,"Select Items",-1),be={class:"text-black"},fe={class:"mt-5"},ye={class:"d-flex align-items-center gap-3"},xe={class:"d-flex align-items-center gap-3"},ke=e("option",{value:"sms"}," Sms Campaign",-1),Ce=e("option",{value:"email"}," Email Campaign",-1),Se=[ke,Ce],we={class:"mt-5 p-5 rounded-md d-flex align-items-center flex-wrap gap-2 emails__area"},Ve=["for"],Te=["id","value"],je={class:"mt-3"},Ue={class:"mt-3"},Ae=["disabled"],Be={key:0,class:"text-danger"},Ee={key:0,class:"mt-3"},Ne=["disabled"],De={key:0,class:"text-danger"},Ie={class:"my-3"},Le={class:"text-area"},Me=["disabled"],Pe={key:0,class:"text-danger"},Fe={__name:"Panel",setup($e){const{sendRequest:w,loading:i,error:r}=ee(),x=c(null),k=c(null),C=c(null),d=c([]),_=c([]),h=c(null),W=()=>d.value=[];se(async()=>{const p=await w("api/get-customers-emails");_.value=p.data});const m=c("email"),V=ae(()=>{var p,a,g,b;return d.value=[],h.value?m.value==="email"?(g=_.value)==null?void 0:g.map(s=>{if(s.email)return s.email}).filter(s=>s==null?void 0:s.includes(h.value)):(b=_.value)==null?void 0:b.map(s=>{if(s.phone)return s.phone}).filter(s=>s==null?void 0:s.includes(h.value)):m.value==="email"?(p=_.value)==null?void 0:p.filter(s=>{if(s.email!=null)return s.email}).map(s=>s.email):(a=_.value)==null?void 0:a.filter(s=>{if(s.phone!=null)return s.phone}).map(s=>s.phone)}),X=()=>{d.value=V.value},Y=async()=>{r.value=null,(await w({url:"api/send-emails",method:"POST",data:{type:m.value,emails:d.value,subject:k.value,message:C.value,campaign:x.value}})).value&&await Toast.fire({icon:"success",title:"Campaign Delete Successfully Done..."})};return(p,a)=>{var g,b,s,T,j,U,A,B,E,N,D,I,L,M,P,$,z,F,H,q,J,O,Q,R;return n(),o("div",null,[re,e("div",ce,[e("div",ue,[e("div",me,[t(i)?u("",!0):(n(),o("h3",pe,"Add Campaign")),G(K,{isShow:t(i),text:"Loading....."},null,8,["isShow"])])]),e("div",ve,[e("div",_e,[e("div",he,[ge,e("strong",be,"("+f(d.value.length)+" selected)",1)]),e("div",fe,[e("div",ye,[v(e("input",{class:"form-control",style:{width:"70%"},"onUpdate:modelValue":a[0]||(a[0]=l=>h.value=l),placeholder:"search..."},null,512),[[y,h.value]]),e("div",xe,[v(e("select",{class:"form-control","onUpdate:modelValue":a[1]||(a[1]=l=>m.value=l),style:{width:"120px"}},Se,512),[[le,m.value]]),e("button",{class:"btn btn-primary",onClick:X},"Select All"),e("button",{class:"btn btn-danger",onClick:W},"Clear Selected")])])]),e("div",we,[(n(!0),o(te,null,oe(V.value,(l,S)=>(n(),o("div",{class:"d-flex single__email__body cursor-pointer",key:S},[l?(n(),o("label",{key:0,for:`checkbox-${S}`,class:ne(["single__email cursor-pointer",{checked:d.value.includes(l)}])},[de(f(l)+" ",1),v(e("input",{type:"checkbox",id:`checkbox-${S}`,value:l,class:"d-none","onUpdate:modelValue":a[2]||(a[2]=Z=>d.value=Z)},null,8,Te),[[ie,d.value]])],10,Ve)):u("",!0)]))),128))]),e("div",je,[e("div",Ue,[v(e("input",{type:"text",disabled:t(i),"onUpdate:modelValue":a[3]||(a[3]=l=>x.value=l),placeholder:"Campaign Name.....",class:"form-control"},null,8,Ae),[[y,x.value]]),(T=(s=(b=(g=t(r))==null?void 0:g.response)==null?void 0:b.data)==null?void 0:s.errors)!=null&&T.campaign?(n(),o("small",Be,f((B=(A=(U=(j=t(r))==null?void 0:j.response)==null?void 0:U.data)==null?void 0:A.errors)==null?void 0:B.campaign[0]),1)):u("",!0)]),m.value==="email"?(n(),o("div",Ee,[v(e("input",{type:"text",disabled:t(i),"onUpdate:modelValue":a[4]||(a[4]=l=>k.value=l),placeholder:"Campaign Subject.....",class:"form-control"},null,8,Ne),[[y,k.value]]),(I=(D=(N=(E=t(r))==null?void 0:E.response)==null?void 0:N.data)==null?void 0:D.errors)!=null&&I.subject?(n(),o("small",De,f(($=(P=(M=(L=t(r))==null?void 0:L.response)==null?void 0:M.data)==null?void 0:P.errors)==null?void 0:$.subject[0]),1)):u("",!0)])):u("",!0),e("div",Ie,[e("div",Le,[v(e("textarea",{disabled:t(i),"onUpdate:modelValue":a[5]||(a[5]=l=>C.value=l),class:"form-control",rows:"7",placeholder:"Campaign Body......."},null,8,Me),[[y,C.value]]),(q=(H=(F=(z=t(r))==null?void 0:z.response)==null?void 0:F.data)==null?void 0:H.errors)!=null&&q.message?(n(),o("small",Pe,f((R=(Q=(O=(J=t(r))==null?void 0:J.response)==null?void 0:O.data)==null?void 0:Q.errors)==null?void 0:R.message[0]),1)):u("",!0)])]),t(i)?u("",!0):(n(),o("button",{key:1,class:"btn btn-lg btn-primary",onClick:Y},"Save Campaign")),G(K,{isShow:t(i),text:"Loading...."},null,8,["isShow"])])])])])])}}};export{Fe as default};
