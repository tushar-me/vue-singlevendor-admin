import{S as f}from"./SummernoteEditor-YXY0HYsX.js";import{_ as g}from"./TreeCategory-yz3vIs9N.js";import{_ as u,aV as v,c as i,a as t,w as _,P as y,b as l,v as d,b7 as C,H as c,O as m,o as p}from"./app-cpAAYSkm.js";const w={name:"Edit",components:{TreeCategory:g,SummernoteEditor:f},data(){return{rawHtml:"this is my data",from:{id:"",parent:"",name:"",description:"",photo:"",icon:""},avatar:{},errors:{}}},methods:{uploadFile(o){this.avatar=o.target.files[0],this.from.photo=URL.createObjectURL(o.target.files[0])},saveCategory(){let o=new FormData;o.append("image",this.avatar),o.append("parent",this.from.parent),o.append("name",this.from.name),o.append("description",this.from.description),o.append("icon",this.from.icon),this.$axios.post(`/api/category/update/${this.from.id}`,o).then(e=>{this.from="",this.errors="",this.avatar="",Toast.fire({icon:"success",title:e.data.message}),this.$router.push({name:"ManageCategory"})}).catch(e=>{this.errors=e.response.data.errors,Toast.fire({icon:"warning",title:e.response.statusText})})}},created(){User.loggedIn()||this.$router.push({name:"Login"});let o=this.$route.params.id;this.$axios.get("/api/category/"+o).then(e=>{var a;this.from={...e.data,photo:`/storage/${(a=e.data)==null?void 0:a.photo}`}}).catch(e=>{console.log(e.response.data)})}},x={class:"card card-custom"},b=t("div",{class:"card-header"},[t("h3",{class:"card-title"},"Add New Category")],-1),V={class:"card-body"},L={class:"form-group"},k=t("label",null,"Parent Category",-1),M={class:"form-group"},S=t("label",null,"Category Name",-1),T={key:0,class:"text-danger"},U={class:"form-group"},N=m('<label>Category Icon</label><a href="https://icones.js.org/" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M11.37 10.384a1.5 1.5 0 0 0 0 2.121l.067.067a1.5 1.5 0 0 0 2.122 0l3.115-3.115c.144-.144.253-.31.326-.488V17a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h7.851a1.5 1.5 0 0 0-.366.269z"></path><path fill="currentColor" fill-rule="evenodd" d="M19.218 4.782a.5.5 0 0 1 0 .708l-6.364 6.364a.5.5 0 0 1-.708-.707l6.364-6.365a.5.5 0 0 1 .707 0" clip-rule="evenodd"></path><path fill="currentColor" fill-rule="evenodd" d="M14 4.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 .5.5v5a.5.5 0 0 1-1 0V5h-4.5a.5.5 0 0 1-.5-.5" clip-rule="evenodd"></path></svg></a>',2),B={class:"form-group"},D=t("label",null,"Category Description",-1),E={class:"form-group"},F={class:"btn btn-clean",style:{border:"dashed 2px",padding:"20px 82px"}},j=m('<span class="svg-icon svg-icon-primary svg-icon-2x"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="80px!important" height="80px!important" viewBox="0 0 24 24" version="1.1"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><rect x="0" y="0" width="24" height="24"></rect><path d="M2,13 C2,12.5 2.5,12 3,12 C3.5,12 4,12.5 4,13 C4,13.3333333 4,15 4,18 C4,19.1045695 4.8954305,20 6,20 L18,20 C19.1045695,20 20,19.1045695 20,18 L20,13 C20,12.4477153 20.4477153,12 21,12 C21.5522847,12 22,12.4477153 22,13 L22,18 C22,20.209139 20.209139,22 18,22 L6,22 C3.790861,22 2,20.209139 2,18 C2,15 2,13.3333333 2,13 Z" fill="#000000" fill-rule="nonzero" opacity="0.3"></path><rect fill="#000000" opacity="0.3" x="11" y="2" width="2" height="14" rx="1"></rect><path d="M12.0362375,3.37797611 L7.70710678,7.70710678 C7.31658249,8.09763107 6.68341751,8.09763107 6.29289322,7.70710678 C5.90236893,7.31658249 5.90236893,6.68341751 6.29289322,6.29289322 L11.2928932,1.29289322 C11.6689749,0.916811528 12.2736364,0.900910387 12.6689647,1.25670585 L17.6689647,5.75670585 C18.0794748,6.12616487 18.1127532,6.75845471 17.7432941,7.16896473 C17.3738351,7.57947475 16.7415453,7.61275317 16.3310353,7.24329415 L12.0362375,3.37797611 Z" fill="#000000" fill-rule="nonzero"></path></g></svg></span>',1),z=["src"],H=t("div",{class:"card-footer"},[t("button",{type:"submit",class:"btn btn-primary mr-2"},"Submit"),t("button",{type:"reset",class:"btn btn-secondary"},"Cancel")],-1);function I(o,e,a,O,r,n){const h=v("TreeCategory");return p(),i("div",null,[t("div",x,[b,t("form",{class:"form",onSubmit:e[5]||(e[5]=_(s=>n.saveCategory(),["prevent"])),enctype:"multipart/form-data"},[t("div",V,[t("div",L,[k,y(h,{modelValue:r.from.parent,"onUpdate:modelValue":e[0]||(e[0]=s=>r.from.parent=s)},null,8,["modelValue"])]),t("div",M,[S,l(t("input",{type:"text",class:"form-control form-control-solid","onUpdate:modelValue":e[1]||(e[1]=s=>r.from.name=s),placeholder:"Enter category name..."},null,512),[[d,r.from.name]]),r.errors.name?(p(),i("small",T,C(r.errors.name[0]),1)):c("",!0)]),t("div",U,[N,l(t("textarea",{class:"form-control","onUpdate:modelValue":e[2]||(e[2]=s=>r.from.icon=s),rows:"3",placeholder:"Svg Icon ......."},null,512),[[d,r.from.icon]])]),t("div",B,[D,l(t("textarea",{class:"form-control","onUpdate:modelValue":e[3]||(e[3]=s=>r.from.description=s),rows:"3",placeholder:"category description......."},null,512),[[d,r.from.description]])]),t("div",E,[t("label",F,[t("input",{type:"file",onChange:e[4]||(e[4]=(...s)=>n.uploadFile&&n.uploadFile(...s)),hidden:""},null,32),j])]),r.from.photo?(p(),i("img",{key:0,src:r.from.photo,alt:"",style:{width:"180px",height:"120px","object-fit":"contain"}},null,8,z)):c("",!0)]),H],32)])])}const A=u(w,[["render",I]]);export{A as default};
